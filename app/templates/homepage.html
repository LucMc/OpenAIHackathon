<!DOCTYPE html>
{% extends "base.html" %}
{% block content %}
  <br>
  <form method="post" id="prompt-form">
	<table margin-left="auto;" margin-right="auto;">
		<tr><th>
		<textarea id="prompt" name="prompt" class="results" rows="24" cols="72"></textarea>
		</th>
		<th></th>
		<th>
			<div class="results scrollabletextbox" id="res">
				<pre class="prettyprint results" style="width:700px;height:625px;">
			</div>
		</th>
		</tr>
		<tr>
			<td><button type="submit" class="btn-submit">submit</button></td>
			<td></td>
			<td></td>
		</tr>
	</table>
  </form>

	<!--Jquery Cdn -->
  <script src="https://code.jquery.com/jquery-3.5.1.js"
	  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
	  crossorigin="anonymous"></script>

  <script type="text/javascript">
	
  $(document).on('submit','#prompt-form',function(e)
			   {
    e.preventDefault();
    $.ajax({
	  type:'POST',
	  url:'/optim',
	  data:{
	    prompt:$("#prompt").val()
	  },
	  success:function(data)
	  {
		// document.getElementById("res").innerHTML = ("<>def main(arg):\\ print('Hello there')");
	    $("#res").replaceWith($('<pre class="prettyprint results" style="width:700px;height:625px;">' +  data + '</pre>'));
		$("#prompt").replaceWith($('<pre class="prettyprint results" style="width:700px;height:625px;">' +  $("#prompt").val() + '</pre>'));

		PR.prettyPrint();
	  }})});

  </script>
  <br><br>

{% endblock %}
